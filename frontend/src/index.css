@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    :root {
        --background: #FCFCFC;
        --foreground: #212126;

        --card: #ffffff;
        --card-foreground: #212126;

        --popover: #ffffff;
        --popover-foreground: #212126;

        --primary: #4d4dff;
        --primary-foreground: #4d4d4d;
        --primary-hover: #3a3aeb;

        --secondary: #f2f2f5;
        --secondary-foreground: #212126;

        --muted: #f7f7f7;
        --muted-foreground: #6b6b78;

        --accent: #f1f1f4;
        --accent-foreground: #1e293b;

        --destructive: #f04c4c;
        --destructive-foreground: #ffffff;

        --border: #e0e0e6;
        --connection: #e0e0e6;
        --input: #e0e0e6;
        --ring: #4d4dff;

        --success: #00b32c;
        --success-foreground: #ffffff;

        --warning: #ffb300;
        --warning-foreground: #ffffff;

        --gradient-primary: linear-gradient(135deg, #4d4dff, #8066ff);
        --gradient-secondary: linear-gradient(135deg, #f2f2f5, #e0e0e6);
        --gradient-card: linear-gradient(145deg, #ffffff, #f7f7fa);

        --shadow-sm: 0 2px 4px -1px rgb(33 33 38 / 0.06);
        --shadow-md: 0 4px 8px -2px rgb(33 33 38 / 0.1);
        --shadow-lg: 0 8px 24px -4px rgb(33 33 38 / 0.15);
        --shadow-primary: 0 8px 32px -8px rgb(77 77 255 / 0.3);

        --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        --radius: 0.5rem;

        /* Sidebar Variables */
        --sidebar-background: #fafafa;
        --sidebar-foreground: #404045;
        --sidebar-primary: #18181b;
        --sidebar-primary-foreground: #fafafa;
        --sidebar-accent: #f4f4f5;
        --sidebar-accent-foreground: #18181b;
        --sidebar-border: #e3e5eb;
        --sidebar-ring: #3b82f6;
    }

    .dark {
        --background: #09090b;
        --foreground: #f8fafc;

        --card: #0c0c0e;
        --card-foreground: #f8fafc;

        --popover: #121214;
        --popover-foreground: #f8fafc;

        --primary: #6366f1;
        --primary-foreground: #ffffff;
        --primary-hover: #818cf8;

        --secondary: #1e293b;
        --secondary-foreground: #f8fafc;

        --muted: #27272a;
        --muted-foreground: #a1a1aa;

        --accent: #27272a;
        --accent-foreground: #f8fafc;

        --destructive: #ef4444;
        --destructive-foreground: #f8fafc;

        --border: #27272a;
        --connection: #27272a;
        --input: #27272a;
        --ring: #6366f1;

        /* Sidebar Dark Variables */
        --sidebar-background: #09090b;
        --sidebar-foreground: #f4f4f5;
        --sidebar-primary: #f4f4f5;
        --sidebar-primary-foreground: #ffffff;
        --sidebar-accent: #27272a;
        --sidebar-accent-foreground: #f4f4f5;
        --sidebar-border: #27272a;
        --sidebar-ring: #6366f1;
    }
}

@layer base {
    * {
        @apply border-border;
        transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        transition-duration: 200ms;
    }

    .no-transitions * {
        transition: none !important;
    }

    body {
        @apply bg-background text-foreground;
    }

    ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }

    ::-webkit-scrollbar-track {
        background: transparent;
    }

    ::-webkit-scrollbar-thumb {
        background: var(--muted-foreground);
        opacity: 0.5;
        border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: var(--foreground);
    }
}

@layer components {
    .whiteboard-wrapper {
        /* Light Mode Whiteboard Colors */
        --wb-bg: #fafafa;
        --wb-grid-dot: #a8aaad;
        --wb-edge: #c4c9d1;
        --wb-edge-hover: #4d4dff;
        --wb-handle: #ffffff;
        --wb-handle-border: #94a3b8;
    }

    .dark .whiteboard-wrapper {
        /* Dark Mode Whiteboard Colors */
        --wb-bg: #09090b;
        --wb-grid-dot: #464649;
        /* FIXED: Brighter edge color for better visibility on dark background */
        --wb-edge: #57575b;
        --wb-edge-hover: #818cf8;
        --wb-handle: #18181b;
        --wb-handle-border: #52525b;
    }

    /* --- Connection Lines (Edges) --- */
    .whiteboard-wrapper .react-flow__edge-path {
        stroke: var(--wb-edge);
        stroke-width: 2px;
        transition: stroke 0.3s ease, stroke-width 0.3s ease;
    }

    /* Edge Hover & Selection */
    .whiteboard-wrapper .react-flow__edge:hover .react-flow__edge-path,
    .whiteboard-wrapper .react-flow__edge.selected .react-flow__edge-path {
        stroke: var(--wb-edge-hover);
        stroke-width: 3px;
        cursor: pointer;
    }

    /* --- The Arrows (Markers) --- */
    .whiteboard-arrow {
        fill: var(--wb-edge);
        transition: fill 0.3s ease;
    }

    .whiteboard-wrapper .react-flow__edge:hover .whiteboard-arrow,
    .whiteboard-arrow.selected,
    .whiteboard-wrapper .react-flow__edge.selected .whiteboard-arrow {
        fill: var(--wb-edge-hover);
    }

    /* --- Handles (Connection Dots) --- */
    .whiteboard-wrapper .react-flow__handle {
        width: 10px;
        height: 10px;
        background: var(--wb-handle);
        border: 2px solid var(--wb-handle-border);
        transition: all 0.2s;
    }

    .whiteboard-wrapper .react-flow__handle:hover {
        background: var(--wb-edge-hover);
        border-color: var(--wb-edge-hover);
        width: 12px;
        height: 12px;
    }

    /* --- Background Grid --- */
    .whiteboard-wrapper .react-flow__background circle {
        fill: var(--wb-grid-dot);
    }

    /* Override React Flow Controls for Dark Mode */
    .whiteboard-wrapper .react-flow__controls {
        background-color: var(--card);
        border: 1px solid var(--border);
        border-radius: 0.5rem;
        box-shadow: var(--shadow-md);
        overflow: hidden;
    }

    .whiteboard-wrapper .react-flow__controls-button {
        background-color: transparent;
        border-bottom: 1px solid var(--border);
        color: var(--muted-foreground);
        transition: color 0.2s, background-color 0.2s;
    }

    .whiteboard-wrapper .react-flow__controls-button:last-child {
        border-bottom: none;
    }

    .whiteboard-wrapper .react-flow__controls-button:hover {
        background-color: var(--accent);
        color: var(--foreground);
    }

    /* Fix icon colors inside buttons */
    .whiteboard-wrapper .react-flow__controls-button svg {
        fill: currentColor;
        max-width: 14px;
        max-height: 14px;
    }

    /* Override MiniMap Backgrounds */
    .whiteboard-wrapper .react-flow__minimap {
        background-color: var(--card);
        border: 1px solid var(--border);
        border-radius: 0.5rem;
    }

    .dark .whiteboard-wrapper .react-flow__minimap-mask {
        fill: rgba(0, 0, 0, 0.4); /* Darker mask for dark mode */
    }
}

/* Import notebook color system */
@import './styles/notebookColors.css';